/**!
 * Front-end Debug UI v0.0.3
 * @author phucbm
 * @homepage https://github.com/viivue/frontend-debug
 * @license MIT 2022
 */
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("FrontEndDebug",[],t):"object"==typeof exports?exports.FrontEndDebug=t():e.FrontEndDebug=t()}(this,(()=>(()=>{"use strict";var e={147:e=>{e.exports=JSON.parse('{"name":"frontend-debug","prettyName":"Front-end Debug UI","codeName":"FrontEndDebug","version":"0.0.3","description":"Debug tool for front-end dev.","homepage":"https://github.com/viivue/frontend-debug","repository":{"type":"git","url":"git@github.com:viivue/frontend-debug"},"author":{"name":"phucbm","url":"https://github.com/phucbm"},"keywords":["phucbm","javascript","es6"],"license":"MIT","main":"./dist/frontend-debug.module.js","scripts":{"dev":"cross-env NODE_ENV=development webpack serve --config config/webpack.dev.js & npm run build-umd","build-umd":"cross-env NODE_ENV=production webpack --config config/webpack.umd.js","build-netlify":"cross-env NODE_ENV=production webpack --config config/webpack.netlify.js","build-module":"cross-env NODE_ENV=production webpack --config config/webpack.module.js","prod":"cross-env NODE_ENV=production npm run build-umd","build":"cross-env NODE_ENV=production webpack --config config/webpack.web.js && npm run build-netlify","publish":"cross-env NODE_ENV=production webpack --config config/webpack.umd.js & npm publish"},"devDependencies":{"@babel/core":"^7.15.8","@babel/plugin-proposal-class-properties":"^7.14.5","@babel/preset-env":"^7.15.8","babel-loader":"^8.2.2","babel-preset-es2015":"^6.24.1","clean-webpack-plugin":"^4.0.0","copy-webpack-plugin":"^9.1.0","cross-env":"^7.0.3","css-loader":"^6.4.0","css-minimizer-webpack-plugin":"^3.1.1","dat.gui":"^0.7.9","html-loader":"^3.1.0","html-webpack-plugin":"^5.3.2","mini-css-extract-plugin":"^2.4.2","postcss-loader":"^6.2.0","postcss-preset-env":"^6.7.0","sass":"^1.43.5","sass-loader":"^12.2.0","style-loader":"^3.3.0","terser-webpack-plugin":"^5.3.1","webpack":"^5.58.2","webpack-cli":"^4.9.0","webpack-dev-server":"^4.3.1","webpack-merge":"^5.8.0"}}')}},t={};function o(n){var a=t[n];if(void 0!==a)return a.exports;var i=t[n]={exports:{}};return e[n](i,i.exports,o),i.exports}o.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var n={};return(()=>{function e(e,t){Object.assign(e.style,t)}o.r(n);const t=()=>({left:(window.pageXOffset||document.documentElement.scrollLeft)-(document.documentElement.clientLeft||0),top:(window.pageYOffset||document.documentElement.scrollTop)-(document.documentElement.clientTop||0)}),a=()=>({w:window.innerWidth||document.documentElement.clientWidth,h:window.innerHeight||document.documentElement.clientHeight}),i=(e=0,t=2)=>parseFloat(e.toFixed(t)),s=(e,t=window.location.href)=>new URL(t).searchParams.get(e),r=(e,t)=>{e.insertAdjacentHTML("beforeend",t)};let l=(e,t,o)=>{let n=e;if("string"==typeof e&&(n=document.querySelector(e)),!n)return"Element doesn't exist!";n.getAttribute(t);o(n.getAttribute(t))};const d={};window.addEventListener("load",(async()=>{d.htmlClass="<button onclick=\"getElementProperty('html', 'class', alert)\">HTML class</button>",d.bodyClass="<button onclick=\"getElementProperty('body', 'class', alert)\">Body class</button>",d.userAgent=navigator.userAgent,window.getElementProperty=l;const e=await(async()=>{try{const e=await fetch("https://api.ipify.org/?format=json");return!!e.ok&&await e.json()}catch(e){return!1}})();d.ip=e?e.ip:"Failed to get current IP!"}));let u,c=Date.now();const p=Date.now(),g=()=>{const e=(t="FEDebugData",JSON.parse(sessionStorage.getItem(t))||null);var t;return!!e&&(u=e,!0)};window.addEventListener("load",(()=>{if(g())return void(c=Date.now()-u.totalTime);const e=new URL(location.href);u={host:e.host,hostname:e.hostname,href:e.href,origin:e.origin,pathname:e.pathname}})),window.addEventListener("beforeunload",(()=>{var e,t;e="FEDebugData",t={...u,totalTime:Date.now()-c},sessionStorage.setItem(e,JSON.stringify(t))}));const b=(e,t=c)=>{const o=Math.round((e-t)/1e3);return`${("0"+Math.floor(o/3600)).slice(-2)}:${("0"+Math.floor(o%3600/60)).slice(-2)}:${("0"+Math.floor(o%3600%60)).slice(-2)}`};const m=o(147);window.FrontEndDebug=new class{constructor(){if(this.debugContainer=document.querySelectorAll("#fe-debug"),!this.validate())return!1;this.packageInfo=m,this.lastScrollPosition=t().top,this.maxSpeed=0,this.lastSpeed=0,this.averageSpeed=0,this.lastSpeedCount=0,this.lastSpeedTotal=0,this.memory={},this.indicateTime=parseInt(s("debug"))||parseInt(sessionStorage.getItem("FrontEndDebugIndicateTime"))||500,sessionStorage.setItem("FrontEndDebugIndicateTime",this.indicateTime),this.stats=[{slug:"scroll",label:"Scroll: [value]",value:()=>{const e=this.lastScrollPosition>t().top?"â«":"â¬",o=i(t().top/(document.body.clientHeight-a().h),3);return`${this.indicate(i(t().top),"scrollAmount")} ${e} ${this.indicate(o,"progress")}`}},{separator:!0,slug:"speed",label:"Speed: [value]",value:()=>(this.lastSpeed=Math.abs(this.lastScrollPosition-t().top),this.lastSpeedCount++,this.lastSpeedTotal+=this.lastSpeed,this.indicate(i(this.lastSpeed),"lastSpeed"))},{slug:"average-speed",label:"Avg. speed: [value]",value:()=>(this.lastScrollPosition!==t().top&&(this.averageSpeed=this.lastSpeedTotal/this.lastSpeedCount),this.indicate(i(this.averageSpeed),"averageSpeed"))},{slug:"max-speed",label:"Max speed: [value]",value:()=>(this.maxSpeed=Math.max(this.maxSpeed,this.lastSpeed),this.indicate(i(this.maxSpeed),"maxSpeed"))},{separator:!0,slug:"viewport",label:"Viewport: [value]",value:()=>`${this.indicate(a().w,"viewportWidth")}/${this.indicate(a().h,"viewportHeight")}`},{slug:"document",label:"Document: [value]",value:()=>`${this.indicate(document.body.clientWidth,"clientWidth")}/${this.indicate(document.body.clientHeight,"clientHeight")}`},{separator:!0,slug:"time",label:"Uptime: [value]",value:()=>`${b(Date.now())}`},{slug:"on-this-page",label:"On this page: [value]",value:()=>`${((e,t=p)=>b(e,t))(Date.now())}`},{isNotChange:!0,separator:!0,slug:"IP",label:"IP: [value]",value:()=>`${d.ip}`},{isNotChange:!0,slug:"user-agent",label:"UserAgent: [value]",value:()=>`${d.userAgent}`},{isNotChange:!0,slug:"browser-class",label:"View: [value]",value:()=>`${[d.htmlClass,d.bodyClass].join(", ")}`,condition:e=>e.trim().length>1}],function(t){r(document.querySelector("body"),`<div id="fe-debug"><div class="head"><span>${t.packageInfo.prettyName} v${t.packageInfo.version}</span><button style="background-color:transparent">ðŸ”»</button></div></div>`),t.debugContainer=document.querySelector("#fe-debug");for(const e of t.stats)if(!t.debugContainer.querySelectorAll(`[data-fe-debug="${e.slug}"]`).length){r(t.debugContainer,`<div style="display:none" data-fe-debug="${e.slug}">${e.label.replace("[value]",e.value())}</div>`);const o=t.debugContainer.querySelector(`[data-fe-debug="${e.slug}"]`);"boolean"==typeof e.separator&&!0===e.separator&&o.classList.add("sep")}e(t.debugContainer,{position:"fixed",bottom:"0",left:"0",zIndex:"9999999",backgroundColor:"rgba(0,0,0,0.7)",color:"white",fontSize:"12px",borderRadius:"0 10px 0 0",backdropFilter:"blur(5px)",overflow:"hidden",minWidth:"175px",maxWidth:"300px",transition:"all .3s ease"}),e(t.debugContainer.querySelector(".head"),{padding:"3px 10px",backgroundColor:"rgba(0,0,0,0.1)",display:"flex",alignItems:"center",justifyContent:"space-between"}),t.debugContainer.querySelectorAll("[data-fe-debug]").forEach((t=>{e(t,{padding:"0 10px"})})),t.debugContainer.querySelectorAll(".head + [data-fe-debug]").forEach((t=>{e(t,{paddingTop:"5px"})})),t.debugContainer.querySelectorAll("[data-fe-debug]:last-child").forEach((t=>{e(t,{paddingBottom:"5px"})})),t.debugContainer.querySelectorAll(".sep").forEach((t=>{e(t,{borderTop:"1px solid rgba(255,255,255,0.15)",paddingTop:"5px",marginTop:"5px"})}));const o=t.debugContainer.querySelector(".head button");e(o,{backgroundColor:"rgba(0,0,0,0)",color:"#fff",marginLeft:"10px",padding:"3px"});const n=()=>{!0===t.isDialogOpen||"true"===t.isDialogOpen?(t.debugContainer.querySelectorAll("[data-fe-debug]").forEach((t=>e(t,{display:"block"}))),o.textContent="ðŸ”»"):(t.debugContainer.querySelectorAll("[data-fe-debug]").forEach((t=>e(t,{display:"none"}))),o.textContent="ðŸ”º"),sessionStorage.setItem("FrontEndDebugOpen",t.isDialogOpen)};t.isDialogOpen=null===sessionStorage.getItem("FrontEndDebugOpen")||sessionStorage.getItem("FrontEndDebugOpen"),n();const a=t.debugContainer.querySelector(".head");e(a,{cursor:"pointer"}),a.addEventListener("click",(()=>{t.isDialogOpen=!t.isDialogOpen,n()}))}(this);const o=()=>{this.updateStats(),window.requestAnimationFrame(o)};window.requestAnimationFrame(o)}indicate(e,t){const o=e=>`<span style="color:#96cdff">${e}</span>`;if(void 0===this.memory[t])this.memory[t]={};else if(this.memory[t].value===e)return this.memory[t].isNew?o(e):e;return this.memory[t].value=e,this.memory[t].isNew=!0,clearTimeout(this.memory[t].timeout),this.memory[t].timeout=setTimeout((()=>{this.memory[t].isNew=!1}),this.indicateTime),o(e)}updateStats(){for(const e of this.stats){const t=e.value();if((!e.isNotChange||!e.domValue)&&(this.debugContainer.querySelectorAll(`[data-fe-debug="${e.slug}"]`).forEach((o=>{o.innerHTML=e.label.replace("[value]",t)})),e.isNotChange)){if(e.condition){e.domValue=e.condition(t);continue}e.domValue=!e.value().includes("undefined")}}this.lastScrollPosition=t().top}validate(){if(null!==s("nodebug"))return sessionStorage.removeItem("FrontEndDebug"),!1;const e=null!==s("debug"),t=!this.debugContainer.length;return e&&t?("object"==typeof sessionStorage.getItem("FrontEndDebug")&&sessionStorage.setItem("FrontEndDebug","on"),console.warn("FrontEndDebug enabled via URL param."),!0):"string"==typeof sessionStorage.getItem("FrontEndDebug")&&"on"===sessionStorage.getItem("FrontEndDebug")&&(console.warn("FrontEndDebug enabled via session storage. Close tab or add ?nodebug to clear session."),!0)}}})(),n})()));