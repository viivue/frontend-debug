/**!
 * Front-end Debug UI v0.1.0
 * @author phucbm
 * @homepage https://github.com/viivue/frontend-debug
 * @license MIT 2023
 */var e={147:e=>{e.exports=JSON.parse('{"name":"@viivue/frontend-debug","outputFilename":"frontend-debug","prettyName":"Front-end Debug UI","codeName":"FrontEndDebug","version":"0.1.0","description":"Debug tool for front-end dev.","homepage":"https://github.com/viivue/frontend-debug","repository":{"type":"git","url":"git@github.com:viivue/frontend-debug"},"author":{"name":"phucbm","url":"https://github.com/phucbm"},"keywords":["phucbm","javascript","es6"],"license":"MIT","main":"./dist/frontend-debug.module.js","scripts":{"dev":"webpack serve --config config/webpack.dev.js","build":"cross-env ENTRY=dev webpack --config config/webpack.build.js && webpack --config config/webpack.prod.js","prod":"webpack --config config/webpack.prod.js && cross-env TARGET=module webpack --config config/webpack.prod.js","publish":"npm run prod & npm publish"},"devDependencies":{"@babel/core":"^7.15.8","@babel/plugin-proposal-class-properties":"^7.14.5","@babel/preset-env":"^7.15.8","@viivue/atomic-css":"^1.1.6","babel-loader":"^8.2.2","babel-preset-es2015":"^6.24.1","clean-webpack-plugin":"^4.0.0","copy-webpack-plugin":"^9.1.0","cross-env":"^7.0.3","css-loader":"^6.4.0","css-minimizer-webpack-plugin":"^3.1.1","honcau":"^0.0.2","html-loader":"^3.1.0","html-webpack-plugin":"^5.3.2","mini-css-extract-plugin":"^2.4.2","postcss-loader":"^6.2.0","postcss-preset-env":"^6.7.0","sass":"^1.43.5","sass-loader":"^12.2.0","style-loader":"^3.3.0","terser-webpack-plugin":"^5.3.1","webpack":"^5.58.2","webpack-cli":"^4.9.0","webpack-dev-server":"^4.3.1","webpack-merge":"^5.8.0"},"dependencies":{"@phucbm/os-util":"^0.0.5","piajs":"^0.1.0"}}')}},t={};function o(n){var s=t[n];if(void 0!==s)return s.exports;var i=t[n]={exports:{}};return e[n](i,i.exports,o),i.exports}(()=>{class e{constructor(e,t){e&&(this.context=e,this.options={names:[],...t},this.eventNames=this.options.names,this.eventsList=[])}fire(e,t={}){if(!this.eventNames.includes(e))return void console.warn(`Cannot fire unrecognized event "${e}"`,this,t);const o={instance:this.context,eventName:e,...t},n=this.context.config?this.context.config:this.context.options;if(n){const t=n[e];"function"==typeof t&&t(o)}const s=this.eventsList[e];s?.length&&s.forEach((e=>{"function"==typeof e&&e(o)}))}add(e,t){e=function(e){let t=e;"on"!==e.slice(0,2)&&(t=t.charAt(0).toUpperCase()+t.slice(1),t="on"+t);return t}(e);this.eventNames.includes(e)?(void 0===this.eventsList[e]&&(this.eventsList[e]=[]),this.eventsList[e].push(t)):console.warn(`Cannot add unrecognized event "${e}"`)}}function t(e,t){(e.length?e:[e]).forEach((e=>e&&e.style?Object.assign(e.style,t):""))}const n=()=>({left:(window.pageXOffset||document.documentElement.scrollLeft)-(document.documentElement.clientLeft||0),top:(window.pageYOffset||document.documentElement.scrollTop)-(document.documentElement.clientTop||0)}),s=()=>({w:window.innerWidth||document.documentElement.clientWidth,h:window.innerHeight||document.documentElement.clientHeight}),i=(e=0,t=2)=>parseFloat(e.toFixed(t)),a=(e,t=window.location.href)=>new URL(t).searchParams.get(e),r=(e,t)=>{e.insertAdjacentHTML("beforeend",t)};const l={getUserAgent:navigator.userAgent,getHTMLClass:()=>document.querySelector("html").getAttribute("class"),getBodyClass:()=>document.querySelector("body").getAttribute("class")};let d,c=window.scrollY;window.scrollBottom=e=>{d&&clearInterval(d),d=setInterval((()=>{c=window.scrollY,window.scrollY+window.innerHeight>=document.documentElement.scrollHeight&&clearTimeout(d),window.scrollBy({left:0,top:e})}),25)},window.addEventListener("scroll",(()=>{window.scrollY<c&&clearInterval(d)}));const u=(e,t)=>`<button onclick="scrollBottom(${e})">${t}</button>`;const p=()=>{const e=(({tag:e="div",className:t=""})=>{const o=document.createElement(e);return t.length&&o.classList.add(t),o})({tag:"div",className:"pseudo-address-bar-detector"});document.body.appendChild(e),Object.assign(e.style,{height:"100vh",width:0,position:"absolute",pointerEvents:"none"});const t=window.innerHeight,o=e.clientHeight-t;return e.remove(),o};let g=Date.now();const h=Date.now(),b=(e,t=h)=>((e,t=g)=>{const o=Math.round((e-t)/1e3);return`${("0"+Math.floor(o/3600)).slice(-2)}:${("0"+Math.floor(o%3600/60)).slice(-2)}:${("0"+Math.floor(o%3600%60)).slice(-2)}`})(e,t);function f(e){!function(e){const t=()=>{e.events.fire("onRaf"),window.requestAnimationFrame(t)};window.requestAnimationFrame(t)}(e),window.addEventListener("scroll",(()=>{e.events.fire("onScroll")})),window.addEventListener("resize",(()=>{e.events.fire("onResize")})),window.addEventListener("load",(()=>{e.events.fire("onLoad")}))}class m{constructor(e,t){if(this.options={slug:void 0,label:"",ref:{},value:"",on:[],highlight:!0,...t},!this.options.slug)return void console.warn("Missing slug");this.key=this.options.slug,this.valueMemory=[],this.prevValue=this.getValue(),this.updateTimeout=null;if(!e.debugContainer.querySelectorAll(`[data-fe-debug="${this.options.slug}"]`).length){r(e.debugContainer,`<div style="display:none" data-fe-debug="${this.options.slug}">${this.options.label.replace("[value]",this.getValue())}</div>`);const t=e.debugContainer.querySelector(`[data-fe-debug="${this.options.slug}"]`);"boolean"==typeof this.options.separator&&!0===this.options.separator&&t.classList.add("sep"),this.node=t}this.options.on.forEach((t=>{e.on(t,(()=>this.updateStats({type:t})))}))}updateStats({type:e}){let t=this.getValue();(t!==this.prevValue||"raf"!==e)&&(clearTimeout(this.updateTimeout),this.node.innerHTML=this.options.label.replace("[value]",t),this.prevValue=t,this.updateTimeout=setTimeout((()=>{t=this.getValue(!1),this.node.innerHTML=this.options.label.replace("[value]",t),this.prevValue=t}),500))}getValue(e=!0){let t=this.options.value;if(this.options.ref)for(let[o,n]of Object.entries(this.options.ref)){let s="function"==typeof n?n():n;this.options.highlight&&e&&s!==this.valueMemory[o]&&(s=`<span style="color:#96cdff">${s}</span>`),this.valueMemory[o]=s,t=t.replace(`{${o}}`,`${s}`)}return t}}const v=o(147);window.FrontEndDebug=new class{constructor(){if(this.debugContainer=document.querySelectorAll("#fe-debug"),!this.validate())return!1;var o;this.events=new e(this,{names:["onRaf","onScroll","onResize","onLoad"]}),this.packageInfo=v,this.lastScrollPosition=n().top,this.stats=[],o=this,r(document.querySelector("body"),`<div id="fe-debug" style="opacity:0;"><div class="head"><span>${o.packageInfo.prettyName} v${o.packageInfo.version}</span><button style="background-color:transparent">🔻</button></div></div>`),o.debugContainer=document.querySelector("#fe-debug"),function(e){let t=0,o=0,a=0,r=0,l=0;e.addRecord({slug:"scroll",label:"Scroll: [value]",ref:{scrollAmount:()=>`${i(n().top)}px`,direction:()=>e.lastScrollPosition>n().top?"⏫":"⏬",progress:()=>`${i(n().top/(document.body.clientHeight-s().h)*100,2)}%`},value:"{scrollAmount} {direction} {progress}",on:["scroll"]}),e.addRecord({separator:!0,slug:"speed",label:"Speed: [value]",ref:{speed:()=>(o=Math.abs(e.lastScrollPosition-n().top),r++,l+=o,i(o))},value:"{speed}",on:["scroll"]}),e.addRecord({slug:"average-speed",label:"Avg. speed: [value]",ref:{"avg-speed":()=>(e.lastScrollPosition!==n().top&&(a=l/r),i(a))},value:"{avg-speed}",on:["raf"]}),e.addRecord({slug:"max-speed",label:"Max speed: [value]",ref:{max:()=>(t=Math.max(t,o),i(t))},value:"{max}",on:["scroll"]}),e.addRecord({separator:!0,slug:"scroll-bottom",label:"Scroll to bottom: [value]",value:()=>`${u(2,"Slow")} - ${u(10,"Normal")} - ${u(20,"Fast")}`})}(this),function(e){e.addRecord({separator:!0,slug:"viewport",label:"Viewport: [value]",ref:{viewportWidth:()=>s().w,viewportHeight:()=>s().h},value:"{viewportWidth}/{viewportHeight}",on:["resize","load"]}),e.addRecord({slug:"document",label:"Document: [value]",ref:{clientWidth:()=>document.body.clientWidth,clientHeight:()=>document.body.clientHeight},value:"{clientWidth}/{clientHeight}",on:["resize","load"]});let t=0;e.addRecord({slug:"address-bar",label:"Address bar: [value]",ref:{addressBarSize:()=>{const e=p();return e!==t&&(t=e),t}},value:"{addressBarSize}",on:["load","scroll","resize"]})}(this),function(e){e.addRecord({separator:!0,slug:"on-this-page",label:"On this page: [value]",ref:{"on-page":()=>`${b(Date.now())}`},value:"{on-page}",on:["raf"],highlight:!1})}(this),function(e){e.addRecord({separator:!0,slug:"user-agent",label:"UserAgent: [value]",value:()=>l.getUserAgent}),e.addRecord({slug:"HTML-class",label:"HTML class: [value]",ref:{"html-class":()=>document.querySelector("html").getAttribute("class")},value:"{html-class}",on:["raf"]}),e.addRecord({slug:"body-class",label:"Body class: [value]",ref:{"body-class":()=>document.querySelector("body").getAttribute("class")},value:"{body-class}",on:["raf"]})}(this),function(e){t(e.debugContainer,{position:"fixed",bottom:"0",left:"0",zIndex:"9999999",backgroundColor:"rgba(0,0,0,0.7)",color:"white",fontSize:"12px",borderRadius:"0 10px 0 0",backdropFilter:"blur(5px)",overflow:"hidden",minWidth:"175px",maxWidth:"300px",transition:"all .3s ease"}),t(e.debugContainer.querySelector(".head"),{padding:"3px 10px",backgroundColor:"rgba(0,0,0,0.1)",display:"flex",alignItems:"center",justifyContent:"space-between"}),e.debugContainer.querySelectorAll("[data-fe-debug]").forEach((e=>{t(e,{padding:"0 10px"})})),e.debugContainer.querySelectorAll(".head + [data-fe-debug]").forEach((e=>{t(e,{paddingTop:"5px"})})),e.debugContainer.querySelectorAll("[data-fe-debug]:last-child").forEach((e=>{t(e,{paddingBottom:"5px"})})),e.debugContainer.querySelectorAll(".sep").forEach((e=>{t(e,{borderTop:"1px solid rgba(255,255,255,0.15)",paddingTop:"5px",marginTop:"5px"})})),setTimeout((()=>{t(e.debugContainer,{opacity:"1"})}),300);const o=e.debugContainer.querySelector(".head button");t(o,{backgroundColor:"rgba(0,0,0,0)",color:"#fff",marginLeft:"10px",padding:"3px"});const n=()=>{!0===e.isDialogOpen||"true"===e.isDialogOpen?(e.debugContainer.querySelectorAll("[data-fe-debug]").forEach((e=>t(e,{display:"block"}))),o.textContent="🔻"):(e.debugContainer.querySelectorAll("[data-fe-debug]").forEach((e=>t(e,{display:"none"}))),o.textContent="🔺"),sessionStorage.setItem("FrontEndDebugOpen",e.isDialogOpen)};e.isDialogOpen=null===sessionStorage.getItem("FrontEndDebugOpen")||sessionStorage.getItem("FrontEndDebugOpen"),n();const s=e.debugContainer.querySelector(".head");t(s,{cursor:"pointer"}),s.addEventListener("click",(()=>{e.isDialogOpen=!e.isDialogOpen,n()}))}(this),f(this),this.on("raf",(()=>{this.lastScrollPosition=n().top})),setTimeout((()=>{this.debugContainer.querySelectorAll("[data-fe-debug] button").forEach((e=>{t(e,{backgroundColor:"transparent",color:"#fff",cursor:"pointer",textDecoration:"underline",padding:0,margin:0,fontSize:"12px",width:"auto",minWidth:"unset"})}))}),0)}on(e,t){this.events.add(e,t)}addRecord(e){this.stats.push(new m(this,e))}getRecord(e){return this.stats.filter((t=>t.key===e))[0]}validate(){if(null!==a("nodebug"))return sessionStorage.removeItem("FrontEndDebug"),!1;const e=null!==a("debug"),t=!this.debugContainer.length;return e&&t?("object"==typeof sessionStorage.getItem("FrontEndDebug")&&sessionStorage.setItem("FrontEndDebug","on"),console.warn("FrontEndDebug enabled via URL param."),!0):"string"==typeof sessionStorage.getItem("FrontEndDebug")&&"on"===sessionStorage.getItem("FrontEndDebug")&&(console.warn("FrontEndDebug enabled via session storage. Close tab or add ?nodebug to clear session."),!0)}}})();