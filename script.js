/**!
 * Front-end Debug v0.0.2
 * @author phucbm
 * @homepage https://github.com/viivue/frontend-debug
 * @license MIT 2022
 */
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("FrontEndDebug",[],t):"object"==typeof exports?exports.FrontEndDebug=t():e.FrontEndDebug=t()}(this,(()=>(()=>{"use strict";var e={r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},t={};function o(e,t){Object.assign(e.style,t)}e.r(t);const i=()=>({left:(window.pageXOffset||document.documentElement.scrollLeft)-(document.documentElement.clientLeft||0),top:(window.pageYOffset||document.documentElement.scrollTop)-(document.documentElement.clientTop||0)}),n=()=>({w:window.innerWidth||document.documentElement.clientWidth,h:window.innerHeight||document.documentElement.clientHeight}),s=(e=0,t=2)=>parseFloat(e.toFixed(t)),a=(e,t=window.location.href)=>new URL(t).searchParams.get(e),r=(e,t)=>{e.insertAdjacentHTML("beforeend",t)};return window.FrontEndDebug=new class{constructor(){if(this.debugContainer=document.querySelectorAll("#fe-debug"),!this.validate())return!1;this.version="0.0.2",this.lastScrollPosition=i().top,this.maxSpeed=0,this.lastSpeed=0,this.averageSpeed=0,this.lastSpeedCount=0,this.lastSpeedTotal=0,this.memory={},this.indicateTime=parseInt(a("debug"))||parseInt(sessionStorage.getItem("FrontEndDebugIndicateTime"))||500,sessionStorage.setItem("FrontEndDebugIndicateTime",this.indicateTime),this.stats=[{slug:"scroll",label:"Scroll: [value]",value:()=>{const e=this.lastScrollPosition>i().top?"⏫":"⏬",t=s(i().top/(document.body.clientHeight-n().h),3);return`${this.indicate(s(i().top),"scrollAmount")} ${e} ${this.indicate(t,"progress")}`}},{separator:!0,slug:"speed",label:"Speed: [value]",value:()=>(this.lastSpeed=Math.abs(this.lastScrollPosition-i().top),this.lastSpeedCount++,this.lastSpeedTotal+=this.lastSpeed,this.indicate(s(this.lastSpeed),"lastSpeed"))},{slug:"average-speed",label:"Avg. speed: [value]",value:()=>(this.lastScrollPosition!==i().top&&(this.averageSpeed=this.lastSpeedTotal/this.lastSpeedCount),this.indicate(s(this.averageSpeed),"averageSpeed"))},{slug:"max-speed",label:"Max speed: [value]",value:()=>(this.maxSpeed=Math.max(this.maxSpeed,this.lastSpeed),this.indicate(s(this.maxSpeed),"maxSpeed"))},{separator:!0,slug:"viewport",label:"Viewport: [value]",value:()=>`${this.indicate(n().w,"viewportWidth")}/${this.indicate(n().h,"viewportHeight")}`},{slug:"document",label:"Document: [value]",value:()=>`${this.indicate(document.body.clientWidth,"clientWidth")}/${this.indicate(document.body.clientHeight,"clientHeight")}`}],this.generateHTML();const e=()=>{this.updateStats(),window.requestAnimationFrame(e)};window.requestAnimationFrame(e)}indicate(e,t){const o=e=>`<span style="color:#96cdff">${e}</span>`;if(void 0===this.memory[t])this.memory[t]={};else if(this.memory[t].value===e)return this.memory[t].isNew?o(e):e;return this.memory[t].value=e,this.memory[t].isNew=!0,clearTimeout(this.memory[t].timeout),this.memory[t].timeout=setTimeout((()=>{this.memory[t].isNew=!1}),this.indicateTime),o(e)}updateStats(){for(const e of this.stats)this.debugContainer.querySelectorAll(`[data-fe-debug="${e.slug}"]`).forEach((t=>{t.innerHTML=e.label.replace("[value]",e.value())}));this.lastScrollPosition=i().top}generateHTML(){r(document.querySelector("body"),`<div id="fe-debug"><div class="head"><span>Debug UI v${this.version}</span><button style="background-color:transparent">🔻</button></div></div>`),this.debugContainer=document.querySelector("#fe-debug");for(const e of this.stats){if(!this.debugContainer.querySelectorAll(`[data-fe-debug="${e.slug}"]`).length){r(this.debugContainer,`<div style="display:none" data-fe-debug="${e.slug}">${e.label.replace("[value]",e.value())}</div>`);const t=this.debugContainer.querySelector(`[data-fe-debug="${e.slug}"]`);"boolean"==typeof e.separator&&!0===e.separator&&t.classList.add("sep")}}o(this.debugContainer,{position:"fixed",bottom:"0",left:"0",zIndex:"9999999",backgroundColor:"rgba(0,0,0,0.7)",color:"white",fontSize:"12px",borderRadius:"0 10px 0 0",backdropFilter:"blur(5px)",overflow:"hidden",minWidth:"175px"}),this.debugContainer.querySelectorAll(".head").forEach((e=>{o(e,{padding:"3px 10px",backgroundColor:"rgba(0,0,0,0.1)",display:"flex",alignItems:"center",justifyContent:"space-between"})})),this.debugContainer.querySelectorAll("[data-fe-debug]").forEach((e=>{o(e,{padding:"0 10px"})})),this.debugContainer.querySelectorAll(".head + [data-fe-debug]").forEach((e=>{o(e,{paddingTop:"5px"})})),this.debugContainer.querySelectorAll("[data-fe-debug]:last-child").forEach((e=>{o(e,{paddingBottom:"5px"})})),this.debugContainer.querySelectorAll(".sep").forEach((e=>{o(e,{borderTop:"1px solid rgba(255,255,255,0.15)",paddingTop:"5px",marginTop:"5px"})}));const e=this.debugContainer.querySelectorAll(".head button");e.forEach((e=>{o(e,{backgroundColor:"rgba(0,0,0,0)",color:"#fff",marginLeft:"10px",padding:"3px"})}));const t=()=>{!0===this.isDialogOpen||"true"===this.isDialogOpen?(this.debugContainer.querySelectorAll("[data-fe-debug]").forEach((e=>o(e,{display:"block"}))),e.textContent="🔻"):(this.debugContainer.querySelectorAll("[data-fe-debug]").forEach((e=>o(e,{display:"none"}))),e.textContent="🔺"),sessionStorage.setItem("FrontEndDebugOpen",this.isDialogOpen)};this.isDialogOpen=null===sessionStorage.getItem("FrontEndDebugOpen")||sessionStorage.getItem("FrontEndDebugOpen"),t(),e.forEach((e=>e.addEventListener("click",(()=>{this.isDialogOpen=!this.isDialogOpen,t()}))))}validate(){if(null!==a("nodebug"))return sessionStorage.removeItem("FrontEndDebug"),!1;const e=null!==a("debug"),t=!this.debugContainer.length;return e&&t?("object"==typeof sessionStorage.getItem("FrontEndDebug")&&sessionStorage.setItem("FrontEndDebug","on"),console.warn("FrontEndDebug enabled via URL param."),!0):"string"==typeof sessionStorage.getItem("FrontEndDebug")&&"on"===sessionStorage.getItem("FrontEndDebug")&&(console.warn("FrontEndDebug enabled via session storage. Close tab or add ?nodebug to clear session."),!0)}},t})()));